---
import type { Benefit } from '../data/benefits';

interface Props {
  benefit: Benefit;
  index: number;
}

const { benefit, index } = Astro.props;

const iconColors = {
  green: 'text-primary-600 bg-primary-100',
  solar: 'text-solar-600 bg-solar-100',
  electric: 'text-electric-600 bg-electric-100',
  wind: 'text-primary-600 bg-primary-100',
};

const icons = {
  sun: `<path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />`,
  battery: `<path stroke-linecap="round" stroke-linejoin="round" d="M21 10.5h.375c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125H21M4.5 10.5H18V15H4.5v-4.5zM3.75 18h15A2.25 2.25 0 0021 15.75v-6a2.25 2.25 0 00-2.25-2.25h-15A2.25 2.25 0 001.5 9.75v6A2.25 2.25 0 003.75 18z" />`,
  plug: `<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />`,
  wind: `<path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />`,
};
---

<article 
  id={benefit.id}
  class="card-hover scroll-mt-24"
  data-animate
>
  <div class="flex flex-col lg:flex-row gap-6">
    <!-- Icône et numéro -->
    <div class="flex lg:flex-col items-center lg:items-start gap-4 lg:gap-2">
      <span class="text-4xl font-bold text-dark-200">0{index + 1}</span>
      <div class={`w-14 h-14 rounded-2xl flex items-center justify-center ${iconColors[benefit.color]}`}>
        <svg class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <Fragment set:html={icons[benefit.icon as keyof typeof icons]} />
        </svg>
      </div>
    </div>
    
    <!-- Contenu -->
    <div class="flex-grow">
      <div class="flex flex-wrap items-start justify-between gap-4 mb-4">
        <div>
          <h3 class="text-2xl font-bold text-dark-900 mb-1">{benefit.title}</h3>
          <p class="text-primary-600 font-medium">{benefit.subtitle}</p>
        </div>
        
        <!-- Stat principale -->
        <div class="text-right">
          <span class="block text-sm text-dark-500">{benefit.stats.label}</span>
          <span class="block text-2xl font-bold text-gradient">{benefit.stats.value}</span>
        </div>
      </div>
      
      <p class="text-dark-600 leading-relaxed mb-6">
        {benefit.description}
      </p>
      
      <!-- Features -->
      <ul class="grid sm:grid-cols-2 gap-3 mb-6">
        {benefit.features.map((feature) => (
          <li class="flex items-start gap-2">
            <svg class={`w-5 h-5 flex-shrink-0 mt-0.5 ${benefit.color === 'solar' ? 'text-solar-500' : benefit.color === 'electric' ? 'text-electric-500' : 'text-primary-500'}`} fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <span class="text-sm text-dark-700">{feature}</span>
          </li>
        ))}
      </ul>
      
      <!-- CTA -->
      <a 
        href={benefit.link}
        class={`inline-flex items-center gap-2 font-semibold transition-colors ${
          benefit.color === 'solar' 
            ? 'text-solar-600 hover:text-solar-700' 
            : benefit.color === 'electric' 
            ? 'text-electric-600 hover:text-electric-700' 
            : 'text-primary-600 hover:text-primary-700'
        }`}
      >
        {benefit.cta}
        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </a>
    </div>
  </div>
</article>
